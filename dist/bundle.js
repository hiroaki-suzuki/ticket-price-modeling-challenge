!function(e){var i={};function t(n){if(i[n])return i[n].exports;var c=i[n]={i:n,l:!1,exports:{}};return e[n].call(c.exports,c,c.exports,t),c.l=!0,c.exports}t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,i){if(1&i&&(e=t(e)),8&i)return e;if(4&i&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var c in e)t.d(n,c,function(i){return e[i]}.bind(null,c));return n},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},t.p="",t(t.s=3)}([function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const n=t(10);i.AbstractTicketSpecification=class{and(e){return new n.AndSpecification(this,e)}}},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),function(e){e.MembersCard="メンバーズカード",e.Identification="身分証",e.StudentIdentificationCard="学生証",e.StudentHandbook="生徒手帳",e.DisabilityHandbook="障害者手帳",e.MICard="エムアイカード"}(i.CertificateTypes||(i.CertificateTypes={}))},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.Age=class{constructor(e){if(e<0)throw new RangeError;this._value=e}value(){return this._value}}},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const n=t(1),c=t(4),a=t(6),s=t(7),o=t(8),d={customer:new c.Customer(59,a.Gender.man,[n.CertificateTypes.MembersCard]),screen:new s.Screen(new Date("2019/08/02(金) 19:59:59"))},r=(new o.TicketPriceTable).findTicket(d);console.log(r)},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const n=t(2),c=t(5);i.Customer=class{constructor(e,i,t=[]){this._age=new n.Age(e),this._gender=i,this._certificates=new c.Certificates(t)}age(){return this._age}gender(){return this._gender}certificates(){return this._certificates}}},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.Certificates=class{constructor(e){this.certificateTypes=e}has(e){return this.certificateTypes.some(i=>i===e)}isEmpty(){return 0===this.certificateTypes.length}}},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});class n{constructor(){}}n.man=new n,n.woman=new n,i.Gender=n},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.Screen=class{constructor(e){this._screenDate=e}screenDate(){return this._screenDate}}},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const n=t(9),c=t(11),a=t(12),s=t(13),o=t(14),d=t(15),r=t(16),S=t(17),u=t(18),l=t(19),y=t(20),f=t(21),h=t(22),p=t(23),T=t(24),m=t(25),w=t(27);i.TicketPriceTable=class{constructor(){this.items=[],this.addItemsCinemaCitizen(),this.addItemsCinemaCitizenSenior(),this.addItemsGeneral(),this.addItemsSenior(),this.addItemsUniversityStudent(),this.addItemsJuniorAndHighSchoolStudent(),this.addItemsUnderElementarySchoolStudent(),this.addItemsDisabilityOverStudent(),this.addItemsDisabilityUnderHighSchool(),this.addItemsMICard()}findTicket(e){return this.items.filter(i=>i.ticketSpecification.isSatisfiedBy(e)).map(e=>e.ticket).reduce((e,i)=>e.price().lowerThan(i.price())?e:i)}addItemsCinemaCitizen(){this.addWeekdayNormalTimeShowAnd(new c.CinemaCitizenSpecification,w.TicketTypes.CinemaCitizen,1e3),this.addWeekdayLateShowAnd(new c.CinemaCitizenSpecification,w.TicketTypes.CinemaCitizen,1e3),this.addHolidayNormalTimeShowAnd(new c.CinemaCitizenSpecification,w.TicketTypes.CinemaCitizen,1300),this.addHolidayLateShowAnd(new c.CinemaCitizenSpecification,w.TicketTypes.CinemaCitizen,1e3),this.addMovieDayAnd(new c.CinemaCitizenSpecification,w.TicketTypes.CinemaCitizen,1100)}addItemsCinemaCitizenSenior(){this.addWeekdayNormalTimeShowAnd(new n.CinemaCitizenSeniorSpecification,w.TicketTypes.CinemaCitizenSenior,1e3),this.addWeekdayLateShowAnd(new n.CinemaCitizenSeniorSpecification,w.TicketTypes.CinemaCitizenSenior,1e3),this.addHolidayNormalTimeShowAnd(new n.CinemaCitizenSeniorSpecification,w.TicketTypes.CinemaCitizenSenior,1e3),this.addHolidayLateShowAnd(new n.CinemaCitizenSeniorSpecification,w.TicketTypes.CinemaCitizenSenior,1e3),this.addMovieDayAnd(new n.CinemaCitizenSeniorSpecification,w.TicketTypes.CinemaCitizenSenior,1e3)}addItemsGeneral(){this.addWeekdayNormalTimeShowAnd(new o.GeneralSpecification,w.TicketTypes.General,1800),this.addWeekdayLateShowAnd(new o.GeneralSpecification,w.TicketTypes.General,1300),this.addHolidayNormalTimeShowAnd(new o.GeneralSpecification,w.TicketTypes.General,1800),this.addHolidayLateShowAnd(new o.GeneralSpecification,w.TicketTypes.General,1300),this.addMovieDayAnd(new o.GeneralSpecification,w.TicketTypes.General,1100)}addItemsSenior(){this.addWeekdayNormalTimeShowAnd(new f.SeniorSpecification,w.TicketTypes.Senior,1100),this.addWeekdayLateShowAnd(new f.SeniorSpecification,w.TicketTypes.Senior,1100),this.addHolidayNormalTimeShowAnd(new f.SeniorSpecification,w.TicketTypes.Senior,1100),this.addHolidayLateShowAnd(new f.SeniorSpecification,w.TicketTypes.Senior,1100),this.addMovieDayAnd(new f.SeniorSpecification,w.TicketTypes.Senior,1100)}addItemsUniversityStudent(){this.addWeekdayNormalTimeShowAnd(new p.UniversityStudentSpecification,w.TicketTypes.UniversityStudent,1500),this.addWeekdayLateShowAnd(new p.UniversityStudentSpecification,w.TicketTypes.UniversityStudent,1300),this.addHolidayNormalTimeShowAnd(new p.UniversityStudentSpecification,w.TicketTypes.UniversityStudent,1500),this.addHolidayLateShowAnd(new p.UniversityStudentSpecification,w.TicketTypes.UniversityStudent,1300),this.addMovieDayAnd(new p.UniversityStudentSpecification,w.TicketTypes.UniversityStudent,1100)}addItemsJuniorAndHighSchoolStudent(){this.addWeekdayNormalTimeShowAnd(new r.JuniorAndHighSchoolStudentSpecification,w.TicketTypes.JuniorAndHighSchoolStudent,1e3),this.addWeekdayLateShowAnd(new r.JuniorAndHighSchoolStudentSpecification,w.TicketTypes.JuniorAndHighSchoolStudent,1e3),this.addHolidayNormalTimeShowAnd(new r.JuniorAndHighSchoolStudentSpecification,w.TicketTypes.JuniorAndHighSchoolStudent,1e3),this.addHolidayLateShowAnd(new r.JuniorAndHighSchoolStudentSpecification,w.TicketTypes.JuniorAndHighSchoolStudent,1e3),this.addMovieDayAnd(new r.JuniorAndHighSchoolStudentSpecification,w.TicketTypes.JuniorAndHighSchoolStudent,1e3)}addItemsUnderElementarySchoolStudent(){this.addWeekdayNormalTimeShowAnd(new h.UnderElementarySchoolStudentSpecification,w.TicketTypes.UnderElementarySchoolStudent,1e3),this.addWeekdayLateShowAnd(new h.UnderElementarySchoolStudentSpecification,w.TicketTypes.UnderElementarySchoolStudent,1e3),this.addHolidayNormalTimeShowAnd(new h.UnderElementarySchoolStudentSpecification,w.TicketTypes.UnderElementarySchoolStudent,1e3),this.addHolidayLateShowAnd(new h.UnderElementarySchoolStudentSpecification,w.TicketTypes.UnderElementarySchoolStudent,1e3),this.addMovieDayAnd(new h.UnderElementarySchoolStudentSpecification,w.TicketTypes.UnderElementarySchoolStudent,1e3)}addItemsDisabilityOverStudent(){this.addWeekdayNormalTimeShowAnd(new a.DisabilityOverStudentSpecification,w.TicketTypes.DisabilityOverStudent,1e3),this.addWeekdayLateShowAnd(new a.DisabilityOverStudentSpecification,w.TicketTypes.DisabilityOverStudent,1e3),this.addHolidayNormalTimeShowAnd(new a.DisabilityOverStudentSpecification,w.TicketTypes.DisabilityOverStudent,1e3),this.addHolidayLateShowAnd(new a.DisabilityOverStudentSpecification,w.TicketTypes.DisabilityOverStudent,1e3),this.addMovieDayAnd(new a.DisabilityOverStudentSpecification,w.TicketTypes.DisabilityOverStudent,1e3)}addItemsDisabilityUnderHighSchool(){this.addWeekdayNormalTimeShowAnd(new s.DisabilityUnderHighSchoolSpecification,w.TicketTypes.DisabilityUnderHighSchool,900),this.addWeekdayLateShowAnd(new s.DisabilityUnderHighSchoolSpecification,w.TicketTypes.DisabilityUnderHighSchool,900),this.addHolidayNormalTimeShowAnd(new s.DisabilityUnderHighSchoolSpecification,w.TicketTypes.DisabilityUnderHighSchool,900),this.addHolidayLateShowAnd(new s.DisabilityUnderHighSchoolSpecification,w.TicketTypes.DisabilityUnderHighSchool,900),this.addMovieDayAnd(new s.DisabilityUnderHighSchoolSpecification,w.TicketTypes.DisabilityUnderHighSchool,900)}addItemsMICard(){this.addWeekdayNormalTimeShowAnd(new u.MICardSpecification,w.TicketTypes.MICard,1600),this.addWeekdayLateShowAnd(new u.MICardSpecification,w.TicketTypes.MICard,1300),this.addHolidayNormalTimeShowAnd(new u.MICardSpecification,w.TicketTypes.MICard,1600),this.addHolidayLateShowAnd(new u.MICardSpecification,w.TicketTypes.MICard,1300)}addWeekdayNormalTimeShowAnd(e,i,t){this.items.push({ticket:new m.Ticket(i,t),ticketSpecification:e.and(new T.WeekdaySpecification).and(new y.NormalTimeShowSpecification)})}addWeekdayLateShowAnd(e,i,t){this.items.push({ticket:new m.Ticket(i,t),ticketSpecification:e.and(new T.WeekdaySpecification).and(new S.LateShowSpecification)})}addHolidayNormalTimeShowAnd(e,i,t){this.items.push({ticket:new m.Ticket(i,t),ticketSpecification:e.and(new d.HolidaySpecification).and(new y.NormalTimeShowSpecification)})}addHolidayLateShowAnd(e,i,t){this.items.push({ticket:new m.Ticket(i,t),ticketSpecification:e.and(new d.HolidaySpecification).and(new S.LateShowSpecification)})}addMovieDayAnd(e,i,t){this.items.push({ticket:new m.Ticket(i,t),ticketSpecification:e.and(new l.MovieDaySpecification)})}}},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const n=t(2),c=t(0),a=t(1);i.CinemaCitizenSeniorSpecification=class extends c.AbstractTicketSpecification{isSatisfiedBy(e){const i=e.customer,t=i.certificates().has(a.CertificateTypes.MembersCard),c=i.age().value()>=new n.Age(60).value();return t&&c}}},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});class n{constructor(e,i){this._spec1=e,this._spec2=i}isSatisfiedBy(e){return this._spec1.isSatisfiedBy(e)&&this._spec2.isSatisfiedBy(e)}and(e){return new n(this,e)}}i.AndSpecification=n},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const n=t(2),c=t(0),a=t(1);i.CinemaCitizenSpecification=class extends c.AbstractTicketSpecification{isSatisfiedBy(e){const i=e.customer,t=i.certificates().has(a.CertificateTypes.MembersCard),c=i.age().value()<new n.Age(60).value();return t&&c}}},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const n=t(2),c=t(0),a=t(1);i.DisabilityOverStudentSpecification=class extends c.AbstractTicketSpecification{isSatisfiedBy(e){const i=e.customer,t=i.certificates().has(a.CertificateTypes.DisabilityHandbook),c=i.certificates().has(a.CertificateTypes.StudentIdentificationCard),s=i.age().value()>=new n.Age(18).value();return t&&!c&&s}}},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const n=t(2),c=t(0),a=t(1);i.DisabilityUnderHighSchoolSpecification=class extends c.AbstractTicketSpecification{isSatisfiedBy(e){const i=e.customer,t=i.certificates().has(a.CertificateTypes.DisabilityHandbook),c=i.certificates().has(a.CertificateTypes.StudentIdentificationCard),s=i.certificates().has(a.CertificateTypes.StudentHandbook),o=i.age().value()<=new n.Age(18).value();return t&&(c||s||o)}}},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const n=t(0);i.GeneralSpecification=class extends n.AbstractTicketSpecification{isSatisfiedBy(e){return e.customer.certificates().isEmpty()}}},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const n=t(0);i.HolidaySpecification=class extends n.AbstractTicketSpecification{isSatisfiedBy(e){const i=e.screen;return[0,6].indexOf(i.screenDate().getDay())>0}}},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const n=t(0),c=t(1);i.JuniorAndHighSchoolStudentSpecification=class extends n.AbstractTicketSpecification{isSatisfiedBy(e){return e.customer.certificates().has(c.CertificateTypes.StudentHandbook)}}},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const n=t(0);i.LateShowSpecification=class extends n.AbstractTicketSpecification{isSatisfiedBy(e){return e.screen.screenDate().getHours()>=20}}},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const n=t(0),c=t(1);i.MICardSpecification=class extends n.AbstractTicketSpecification{isSatisfiedBy(e){return e.customer.certificates().has(c.CertificateTypes.MICard)}}},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const n=t(0);i.MovieDaySpecification=class extends n.AbstractTicketSpecification{isSatisfiedBy(e){return 1===e.screen.screenDate().getDate()}}},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const n=t(0);i.NormalTimeShowSpecification=class extends n.AbstractTicketSpecification{isSatisfiedBy(e){return e.screen.screenDate().getHours()<20}}},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const n=t(2),c=t(0);i.SeniorSpecification=class extends c.AbstractTicketSpecification{isSatisfiedBy(e){return e.customer.age().value()>=new n.Age(70).value()}}},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const n=t(2),c=t(0);i.UnderElementarySchoolStudentSpecification=class extends c.AbstractTicketSpecification{isSatisfiedBy(e){return e.customer.age().value()<=new n.Age(12).value()}}},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const n=t(0),c=t(1);i.UniversityStudentSpecification=class extends n.AbstractTicketSpecification{isSatisfiedBy(e){return e.customer.certificates().has(c.CertificateTypes.StudentIdentificationCard)}}},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const n=t(0),c=[1,2,3,4,5];i.WeekdaySpecification=class extends n.AbstractTicketSpecification{isSatisfiedBy(e){const i=e.screen;return c.indexOf(i.screenDate().getDay())>0}}},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const n=t(26);i.Ticket=class{constructor(e,i){this._ticketType=e,this._price=new n.Price(i)}ticketType(){return this._ticketType}price(){return this._price}}},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.Price=class{constructor(e){if(e<0)throw new RangeError;this._amount=e}amount(){return this._amount}lowerThan(e){return this._amount<e._amount}}},function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),function(e){e.CinemaCitizen="シネマシティズン",e.CinemaCitizenSenior="シネマシティズン（60才以上）",e.General="一般",e.Senior="シニア（70才以上）",e.UniversityStudent="学生（大・専）",e.JuniorAndHighSchoolStudent="中・高校生",e.UnderElementarySchoolStudent="幼児（3才以上）・小学生",e.DisabilityOverStudent="障がい者（学生以上）",e.DisabilityUnderHighSchool="障がい者（高校以下）",e.MICard="エムアイカード"}(i.TicketTypes||(i.TicketTypes={}))}]);